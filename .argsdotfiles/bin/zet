#!/usr/bin/env bash

cd ~/zettel

file=~/zettel/diary/`date "+%Y-%m-%d"`.md

if [[ ! -f "$file" ]]; then
  printf "# `date "+%Y-%m-%d %A"`\n\n" >> $file

  curl -s  'https://quotes.rest/qod?category=inspire' | \
    jq '.contents.quotes[0].quote','.contents.quotes[0].author' >> $file
fi

if [ $# -eq 0 ]; then
  nvim -u ~/.argsdotfiles/vim/vim-zettel.vimrc $file -c "norm G"
else
  printf -- "- `date +%H:%M:%S` $*" >> $file
  nvim -u ~/.argsdotfiles/vim/vim-zettel.vimrc $file -c "norm G\$A " -c "startinsert!"
fi
